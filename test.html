<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows XP Simülasyonu</title>
    <style>
        /* CSS KODLARI BURAYA GELECEK */
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* XP benzeri bir font */
            overflow: hidden; /* Kaydırma çubuklarını gizler */
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/b/b6/Bliss.png'); /* Windows XP Bliss duvar kağıdı */
            background-size: cover; /* Resmi tam ekran kaplaması için */
            background-repeat: no-repeat;
            background-position: center center;
            cursor: default; /* Varsayılan imleç */
        }

        #desktop {
            width: 100vw; /* Görünüm genişliğinin %100'ü */
            height: calc(100vh - 40px); /* Görev çubuğu yüksekliği kadar boşluk bırakır */
            position: relative; /* İçindeki elemanların konumlandırılması için */
            display: flex;
            flex-wrap: wrap; /* İkonları yan yana ve alt alta dizmek için */
            align-content: flex-start; /* İkonları yukarıya hizalar */
            padding: 10px;
        }

        #taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background-color: #3665a3; /* XP mavi tonu */
            border-top: 1px solid #7c9ec4;
            box-shadow: inset 0 1px 0 #cfe7ff; /* İçeriden hafif parlaklık */
            display: flex;
            align-items: center;
            padding: 0 5px;
            box-sizing: border-box; /* Padding'in genişliğe dahil edilmesini sağlar */
            z-index: 1000; /* En üstte görünmesini sağlar */
        }

        #start-button {
            background-color: #3665a3; /* Mavi */
            background: linear-gradient(to bottom, #7b9fe7, #3665a3); /* Gradyan efekti */
            border: 1px solid #233e72;
            border-radius: 3px; /* Hafif yuvarlak köşeler */
            padding: 5px 12px;
            font-weight: bold;
            color: white; /* Metin rengi beyaz */
            cursor: pointer;
            margin-right: 10px;
            box-shadow: 0 1px 1px rgba(0,0,0,0.3); /* Dış gölge */
            user-select: none; /* Metin seçimi engeller */
            display: flex; /* İkon eklemek için */
            align-items: center;
        }

        #start-button::before { /* Başlat ikonu için */
            content: "";
            display: inline-block;
            width: 24px;
            height: 24px;
            background-image: url('https://img.icons8.com/color/24/windows-xp.png'); /* XP Başlat ikonu */
            background-size: cover;
            margin-right: 5px;
            vertical-align: middle;
        }

        #start-button:active {
            background: linear-gradient(to bottom, #3665a3, #7b9fe7); /* Basıldığında gradyan ters döner */
            box-shadow: inset 0 1px 1px rgba(0,0,0,0.3); /* İç gölge */
            border-color: #233e72;
        }

        #taskbar-apps {
            flex-grow: 1; /* Geri kalan alanı doldurur */
            display: flex;
            align-items: center;
        }

        .taskbar-app-icon {
            background-color: #3665a3;
            border: 1px solid #233e72;
            border-radius: 3px;
            padding: 2px 8px;
            margin-left: 2px;
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            height: 26px; /* Görev çubuğu içindeki ikon yüksekliği */
            color: white;
            font-size: 0.85em;
            box-shadow: 0 1px 1px rgba(0,0,0,0.2);
        }

        .taskbar-app-icon.active {
            background: linear-gradient(to bottom, #7b9fe7, #3665a3); /* Aktif olduğunda gradyan */
            box-shadow: inset 0 1px 1px rgba(0,0,0,0.3); /* İç gölge */
            border-color: #233e72;
        }
        .taskbar-app-icon:hover {
            background: linear-gradient(to bottom, #7b9fe7, #3665a3);
        }

        #system-tray {
            display: flex;
            align-items: center;
            background-color: #3665a3; /* Aynı mavi tonu */
            border: 1px solid #233e72; /* Koyu kenarlık */
            box-shadow: inset 0 1px 1px rgba(0,0,0,0.2); /* Hafif iç gölge */
            padding: 0 10px;
            height: 100%;
            box-sizing: border-box;
            margin-left: auto; /* Sağa hizalar */
            color: white; /* Metin rengi beyaz */
            font-size: 0.85em; /* Saati biraz küçült */
        }

        #system-tray img {
            filter: brightness(0) invert(1); /* İkonu beyaza çevirir */
            margin-right: 5px;
        }

        .desktop-icon {
            width: 70px;
            height: 70px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 10px;
            text-align: center;
            color: #333; /* XP ikon metni genellikle koyu gridir */
            text-shadow: 1px 1px 0px rgba(255,255,255,0.7); /* Beyaz hafif gölge */
            font-size: 0.85em; /* Hafif büyütme */
            cursor: pointer;
            user-select: none; /* Metin seçimi engeller */
        }

        .desktop-icon img {
            width: 38px; /* İkon görseli boyutu */
            height: 38px;
            margin-bottom: 5px;
        }

        .window {
            position: absolute;
            background-color: #ece9d8; /* XP'nin grimsi pencere rengi */
            border: 1px solid #7c9ec4; /* XP pencere kenarlığı mavisi */
            border-radius: 5px; /* Hafif yuvarlak köşeler */
            min-width: 200px;
            min-height: 150px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.3); /* Daha belirgin ama yumuşak gölge */
            resize: both; /* Boyutlandırılabilir yapar */
            overflow: auto; /* İçerik taşarsa kaydırma çubukları çıkar */
            z-index: 999; /* Pencereleri diğerlerinin üstünde tutar */
            display: flex;
            flex-direction: column;
            max-width: 90vw;
            max-height: calc(100vh - 60px);
            transition: transform 0.2s ease-out, opacity 0.2s ease-out; /* Açılış/kapanış animasyonu */
        }

        .window.minimized {
            display: none; /* Küçültülmüş pencereleri gizle */
        }

        .window-title-bar {
            background-color: #3665a3; /* XP mavi başlık çubuğu */
            background: linear-gradient(to right, #0a246a, #3665a3); /* XP başlık çubuğu gradyanı */
            color: white;
            padding: 4px 8px; /* Daha fazla padding */
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: grab; /* Sürükleme imleci */
            user-select: none;
            border-bottom: 1px solid #1a3e7a; /* Koyu ayırıcı */
            border-top-left-radius: 4px; /* Başlık çubuğunun köşeleri */
            border-top-right-radius: 4px;
            font-size: 0.9em;
        }

        .window-title-bar span {
            flex-grow: 1; /* Başlık metnini yayar */
        }

        .window-buttons {
            display: flex;
        }

        .window-button {
            background-color: #cfd8ea; /* Açık gri */
            border: 1px solid #84a2c6; /* Mavi kenarlık */
            border-radius: 3px;
            width: 22px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: 3px;
            cursor: pointer;
            font-size: 1.1em; /* Daha büyük font */
            font-weight: normal;
            line-height: 1; /* Metnin dikey hizalaması için */
            user-select: none;
            color: #333; /* Koyu gri ikon rengi */
            box-shadow: 0 1px 1px rgba(0,0,0,0.1);
        }

        .window-button:hover {
            background-color: #e6f0fa; /* Hover efekti */
            border-color: #3665a3;
        }

        .window-button:active {
            background-color: #c9e0f6; /* Basıldığında renk */
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.2); /* İç gölge */
            border-color: #3665a3;
        }

        .close-button {
            background-color: #ff5c5c; /* Kırmızı kapat düğmesi */
            border-color: #cc0000;
            color: white;
            font-weight: bold;
        }

        .close-button:hover {
            background-color: #ff0000;
            border-color: #cc0000;
        }
        .close-button:active {
            background-color: #cc0000;
            border-color: #ff5c5c;
        }

        .window-content {
            flex-grow: 1; /* İçeriğin kalan alanı doldurmasını sağlar */
            padding: 10px;
            background-color: #FFFFFF; /* İçerik alanı beyaz */
            overflow: auto;
            border-bottom-left-radius: 4px; /* Köşeler */
            border-bottom-right-radius: 4px;
        }

        /* Başlat Menüsü - XP Stili */
        #start-menu {
            position: absolute;
            bottom: 40px; /* Görev çubuğunun hemen üstünde */
            left: 0;
            width: 250px; /* Daha geniş bir başlangıç menüsü */
            background-color: #f0f0f0; /* Açık gri tonu */
            border: 1px solid #7c9ec4; /* Mavi kenarlık */
            box-shadow: 4px 4px 8px rgba(0,0,0,0.4);
            display: none; /* Başlangıçta gizli */
            flex-direction: column;
            z-index: 1001; /* En üstte görünmesi için */
            border-radius: 5px; /* Hafif yuvarlak köşeler */
            overflow: hidden; /* İçeriğin taşmasını engeller */
        }

        #start-menu.show {
            display: flex;
        }

        #start-menu-header {
            background: linear-gradient(to right, #0a246a, #3665a3); /* XP başlangıç menüsü üst gradyanı */
            color: white;
            padding: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
            font-size: 1.1em;
        }

        #start-menu-header img {
            width: 32px;
            height: 32px;
            border-radius: 50%; /* Profil fotoğrafı gibi */
            margin-right: 10px;
            border: 1px solid rgba(255,255,255,0.5);
        }

        #start-menu-content {
            display: flex;
            flex-grow: 1;
        }

        #start-menu-left {
            flex: 2; /* Sol taraf daha geniş */
            background-color: #e0e9f6; /* Açık mavi arka plan */
            padding: 5px 0;
            border-right: 1px solid #c0c0c0;
        }

        #start-menu-right {
            flex: 1; /* Sağ taraf daha dar */
            background-color: #f0f0f0;
            padding: 5px 0;
        }

        .start-menu-item {
            padding: 6px 15px; /* Daha fazla padding */
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            gap: 10px; /* İkon ve metin arası boşluk */
            white-space: nowrap; /* Metni tek satırda tut */
            color: #333;
        }

        .start-menu-item img {
            width: 24px; /* İkon boyutu */
            height: 24px;
        }

        .start-menu-item:hover {
            background-color: #3665a3; /* Üzerine gelindiğinde mavi arka plan */
            color: white;
        }

        .start-menu-item.logout {
            border-top: 1px solid #c0c0c0; /* Çıkış öğesi için üst çizgi */
            margin-top: 5px;
            padding-top: 8px;
            display: flex;
            justify-content: flex-end; /* Sağa hizala */
            font-weight: bold;
            background-color: #f0f0f0; /* Alt kısım için ayrı arka plan */
            padding-bottom: 8px;
        }
        .start-menu-item.logout:hover {
            background-color: #d0e0f0; /* Hover rengi */
            color: #333;
        }

        .start-menu-item.logout img {
            filter: brightness(0) invert(0); /* Kapanma ikonu rengi */
        }
    </style>
</head>
<body>

    <div id="desktop">
        <div class="desktop-icon" data-app="my-computer">
            <img src="https://img.icons8.com/fluency/48/computer.png" alt="Bilgisayarım">
            <span>Bilgisayarım</span>
        </div>
        <div class="desktop-icon" data-app="notepad">
            <img src="https://img.icons8.com/fluency/48/notepad.png" alt="Not Defteri">
            <span>Not Defteri</span>
        </div>
        <div class="desktop-icon" data-app="calculator">
            <img src="https://img.icons8.com/fluency/48/calculator.png" alt="Hesap Makinesi">
            <span>Hesap Makinesi</span>
        </div>
        <div class="desktop-icon" data-app="recycle-bin">
            <img src="https://img.icons8.com/fluency/48/trash.png" alt="Geri Dönüşüm Kutusu">
            <span>Geri Dönüşüm Kutusu</span>
        </div>
    </div>

    <div id="taskbar">
        <div id="start-button">Başlat</div>
        <div id="taskbar-apps">
        </div>
        <div id="system-tray">
            <img src="https://img.icons8.com/fluency/20/speaker.png" alt="Ses">
            <span id="time"></span>
        </div>
    </div>

    <div id="start-menu">
        <div id="start-menu-header">
            <img src="https://img.icons8.com/fluency/48/user.png" alt="Kullanıcı">
            <span>Kullanıcı Adı</span>
        </div>
        <div id="start-menu-content">
            <div id="start-menu-left">
                <div class="start-menu-item" data-app="my-computer">
                    <img src="https://img.icons8.com/fluency/24/computer.png" alt="Bilgisayarım">
                    Bilgisayarım
                </div>
                <div class="start-menu-item" data-app="notepad">
                    <img src="https://img.icons8.com/fluency/24/notepad.png" alt="Not Defteri">
                    Not Defteri
                </div>
                <div class="start-menu-item" data-app="calculator">
                    <img src="https://img.icons8.com/fluency/24/calculator.png" alt="Hesap Makinesi">
                    Hesap Makinesi
                </div>
                </div>
            <div id="start-menu-right">
                <div class="start-menu-item" data-app="my-documents">
                    <img src="https://img.icons8.com/fluency/24/folder.png" alt="Belgelerim">
                    Belgelerim
                </div>
                <div class="start-menu-item" data-app="my-pictures">
                    <img src="https://img.icons8.com/fluency/24/pictures-folder.png" alt="Resimlerim">
                    Resimlerim
                </div>
                <div class="start-menu-item" data-app="my-music">
                    <img src="https://img.icons8.com/fluency/24/music-folder.png" alt="Müziğim">
                    Müziğim
                </div>
                <div class="start-menu-item" data-app="control-panel">
                    <img src="https://img.icons8.com/fluency/24/control-panel.png" alt="Denetim Masası">
                    Denetim Masası
                </div>
                <div class="start-menu-item" data-app="network-connections">
                    <img src="https://img.icons8.com/fluency/24/ethernet-on.png" alt="Ağ Bağlantıları">
                    Ağ Bağlantıları
                </div>
                <div class="start-menu-item" data-app="help-and-support">
                    <img src="https://img.icons8.com/fluency/24/help.png" alt="Yardım ve Destek">
                    Yardım ve Destek
                </div>
                <div class="start-menu-item" data-app="run">
                    <img src="https://img.icons8.com/fluency/24/run-command.png" alt="Çalıştır...">
                    Çalıştır...
                </div>
                <div class="start-menu-item logout">
                    <img src="https://img.icons8.com/fluency/24/shutdown.png" alt="Kapat">
                    Kapat
                </div>
            </div>
        </div>
    </div>

    <script>
        /* JAVASCRIPT KODLARI BURAYA GELECEK */
        document.addEventListener('DOMContentLoaded', () => {
            const desktop = document.getElementById('desktop');
            const timeElement = document.getElementById('time');
            const startButton = document.getElementById('start-button');
            const startMenu = document.getElementById('start-menu');
            const taskbarApps = document.getElementById('taskbar-apps');

            let zIndexCounter = 100; // Pencerelerin z-index'ini yönetmek için
            let openWindows = {}; // Açık pencereleri takip etmek için

            // --- Saat Güncelleme ---
            function updateTime() {
                const now = new Date();
                let hours = now.getHours();
                let minutes = now.getMinutes();
                // Windows XP saati genellikle AM/PM formatında değildir, 24 saatlik veya 12 saatlik (AM/PM'siz) olabilir.
                // Basitlik adına şimdilik 24 saatlik format kullanalım veya 12 saatlik (AM/PM'siz)
                hours = hours < 10 ? '0' + hours : hours;
                minutes = minutes < 10 ? '0' + minutes : minutes;

                timeElement.textContent = `${hours}:${minutes}`;
            }
            setInterval(updateTime, 1000);
            updateTime(); // Sayfa yüklendiğinde hemen göster

            // --- Başlat Menüsü İşlevselliği ---
            startButton.addEventListener('click', (event) => {
                event.stopPropagation(); // Olayın dışarı yayılmasını engeller
                startMenu.classList.toggle('show');
            });

            // Başlat menüsü dışına tıklanırsa kapat
            document.addEventListener('click', (event) => {
                if (!startMenu.contains(event.target) && event.target !== startButton) {
                    startMenu.classList.remove('show');
                }
            });

            // --- Pencere Yaratma ve Yönetimi ---
            function createWindow(appId, title, contentHTML, width = 400, height = 300) {
                if (openWindows[appId] && !openWindows[appId].classList.contains('minimized')) {
                    // Zaten açık ve küçültülmemişse, öne getir
                    bringWindowToFront(openWindows[appId]);
                    return;
                } else if (openWindows[appId] && openWindows[appId].classList.contains('minimized')) {
                    // Küçültülmüşse, geri yükle
                    openWindows[appId].classList.remove('minimized');
                    openWindows[appId].style.display = 'flex'; // Tekrar görünür yap
                    bringWindowToFront(openWindows[appId]);
                    const taskbarIcon = document.querySelector(`.taskbar-app-icon[data-app="${appId}"]`);
                    if(taskbarIcon) taskbarIcon.classList.add('active'); // Görev çubuğu ikonunu aktif yap
                    return;
                }

                zIndexCounter++;

                const windowDiv = document.createElement('div');
                windowDiv.className = 'window';
                windowDiv.id = `window-${appId}`;
                windowDiv.style.zIndex = zIndexCounter;
                windowDiv.style.width = `${width}px`;
                windowDiv.style.height = `${height}px`;
                // Rastgele başlangıç konumu (ekran içinde kalacak şekilde ayarlandı)
                const randomX = Math.random() * (window.innerWidth - width - 100) + 50;
                const randomY = Math.random() * (window.innerHeight - height - 100) + 50;
                windowDiv.style.left = `${Math.max(50, Math.min(randomX, window.innerWidth - width - 50))}px`;
                windowDiv.style.top = `${Math.max(50, Math.min(randomY, window.innerHeight - height - 50))}px`;
                
                windowDiv.addEventListener('mousedown', () => bringWindowToFront(windowDiv));


                windowDiv.innerHTML = `
                    <div class="window-title-bar">
                        <span>${title}</span>
                        <div class="window-buttons">
                            <div class="window-button minimize-button" data-window-id="${appId}">_</div>
                            <div class="window-button maximize-button" data-window-id="${appId}">&#9633;</div>
                            <div class="window-button close-button" data-window-id="${appId}">X</div>
                        </div>
                    </div>
                    <div class="window-content">${contentHTML}</div>
                `;

                desktop.appendChild(windowDiv);
                openWindows[appId] = windowDiv; // Pencereyi açık pencereler listesine ekle

                addWindowDrag(windowDiv);
                addWindowButtons(windowDiv, appId, title);
                addAppToTaskbar(appId, title);
            }

            function bringWindowToFront(windowElement) {
                zIndexCounter++;
                windowElement.style.zIndex = zIndexCounter;
                // Tüm görev çubuğu ikonlarının aktifliğini kaldır
                document.querySelectorAll('.taskbar-app-icon').forEach(icon => icon.classList.remove('active'));
                // Bu pencerenin görev çubuğu ikonunu aktif yap
                const taskbarIcon = document.querySelector(`.taskbar-app-icon[data-app="${windowElement.id.replace('window-', '')}"]`);
                if(taskbarIcon) taskbarIcon.classList.add('active');

                // Aktif pencerenin başlık çubuğunu da vurgulayalım
                document.querySelectorAll('.window').forEach(win => {
                    const titleBar = win.querySelector('.window-title-bar');
                    if (titleBar) {
                         titleBar.style.background = 'linear-gradient(to right, #0a246a, #3665a3)';
                    }
                });
                const activeTitleBar = windowElement.querySelector('.window-title-bar');
                if (activeTitleBar) {
                    activeTitleBar.style.background = 'linear-gradient(to right, #2a588b, #4b89dc)'; // XP'nin aktif pencere başlığı
                }
            }


            // --- Pencere Sürükleme ---
            function addWindowDrag(windowElement) {
                const titleBar = windowElement.querySelector('.window-title-bar');
                let isDragging = false;
                let offsetX, offsetY;

                titleBar.addEventListener('mousedown', (e) => {
                    if (e.target.classList.contains('window-button')) return; // Butonlara tıklayınca sürüklemeyi engelle
                    isDragging = true;
                    windowElement.style.cursor = 'grabbing';
                    offsetX = e.clientX - windowElement.getBoundingClientRect().left;
                    offsetY = e.clientY - windowElement.getBoundingClientRect().top;
                    bringWindowToFront(windowElement); // Sürüklenirken öne getir
                });

                desktop.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;
                    windowElement.style.left = `${e.clientX - offsetX}px`;
                    windowElement.style.top = `${e.clientY - offsetY}px`;
                });

                desktop.addEventListener('mouseup', () => {
                    isDragging = false;
                    windowElement.style.cursor = 'grab'; // Sürükleme bittiğinde imleci geri al
                });
            }

            // --- Pencere Butonları (Küçült, Büyüt, Kapat) ---
            function addWindowButtons(windowElement, appId, title) {
                const minimizeButton = windowElement.querySelector('.minimize-button');
                const maximizeButton = windowElement.querySelector('.maximize-button');
                const closeButton = windowElement.querySelector('.close-button');

                let isMaximized = false; // Maksimum durumunu takip et
                let originalWidth, originalHeight, originalX, originalY; // Eski konum ve boyutları saklamak için

                minimizeButton.addEventListener('click', () => {
                    windowElement.classList.add('minimized');
                    const taskbarIcon = document.querySelector(`.taskbar-app-icon[data-app="${appId}"]`);
                    if(taskbarIcon) taskbarIcon.classList.remove('active'); // Aktifliğini kaldır
                });

                maximizeButton.addEventListener('click', () => {
                    if (isMaximized) {
                        // Küçült
                        windowElement.style.width = `${originalWidth}px`;
                        windowElement.style.height = `${originalHeight}px`;
                        windowElement.style.left = `${originalX}px`;
                        windowElement.style.top = `${originalY}px`;
                        windowElement.style.resize = 'both'; // Boyutlandırmayı tekrar etkinleştir
                        isMaximized = false;
                    } else {
                        // Mevcut konum ve boyutları kaydet
                        originalWidth = windowElement.offsetWidth;
                        originalHeight = windowElement.offsetHeight;
                        originalX = windowElement.offsetLeft;
                        originalY = windowElement.offsetTop;

                        // Tam ekran yap
                        windowElement.style.width = '100vw';
                        windowElement.style.height = 'calc(100vh - 40px)';
                        windowElement.style.left = '0';
                        windowElement.style.top = '0';
                        windowElement.style.resize = 'none'; // Tam ekrandayken boyutlandırmayı devre dışı bırak
                        isMaximized = true;
                    }
                });

                closeButton.addEventListener('click', () => {
                    windowElement.remove();
                    delete openWindows[appId]; // Açık pencereler listesinden kaldır
                    removeAppFromTaskbar(appId);
                });
            }

            // --- Görev Çubuğuna Uygulama Ekleme/Kaldırma ---
            function addAppToTaskbar(appId, title) {
                const existingIcon = document.querySelector(`.taskbar-app-icon[data-app="${appId}"]`);
                if (existingIcon) {
                    existingIcon.classList.add('active'); // Zaten varsa sadece aktif yap
                    return;
                }

                const taskbarIcon = document.createElement('div');
                taskbarIcon.className = 'taskbar-app-icon active';
                taskbarIcon.setAttribute('data-app', appId);
                taskbarIcon.textContent = title;
                taskbarApps.appendChild(taskbarIcon);

                taskbarIcon.addEventListener('click', () => {
                    const windowElement = openWindows[appId];
                    if (windowElement) {
                        if (windowElement.classList.contains('minimized')) {
                            windowElement.classList.remove('minimized');
                            windowElement.style.display = 'flex'; // Görünür yap
                            bringWindowToFront(windowElement);
                            taskbarIcon.classList.add('active');
                        } else {
                            // Zaten açıksa ve en üstte ise küçült, değilse öne getir
                            if (parseInt(windowElement.style.zIndex) === zIndexCounter) { 
                                windowElement.classList.add('minimized');
                                taskbarIcon.classList.remove('active');
                            } else {
                                bringWindowToFront(windowElement);
                            }
                        }
                    }
                });
            }

            function removeAppFromTaskbar(appId) {
                const taskbarIcon = document.querySelector(`.taskbar-app-icon[data-app="${appId}"]`);
                if (taskbarIcon) {
                    taskbarIcon.remove();
                }
            }


            // --- Uygulama Açma İşlevselliği ---
            function openApp(appId) {
                let title = '';
                let content = '';
                let width = 400;
                let height = 300;

                switch (appId) {
                    case 'my-computer':
                        title = 'Bilgisayarım';
                        content = `
                            <p>Bu bilgisayardaki sürücüler ve dosyalar hakkında bilgi...</p>
                            <ul>
                                <li>Yerel Disk (C:)</li>
                                <li>DVD Sürücüsü (D:)</li>
                                <li>Ağ Sürücüleri</li>
                            </ul>
                        `;
                        width = 500;
                        height = 350;
                        break;
                    case 'notepad':
                        title = 'Adsız - Not Defteri';
                        content = `<textarea style="width: 100%; height: calc(100% - 20px); resize: none; border: none; outline: none; padding: 5px; box-sizing: border-box; font-family: 'Consolas', 'Courier New', monospace; font-size: 0.9em;"></textarea>`;
                        width = 450;
                        height = 350;
                        break;
                    case 'calculator':
                        title = 'Hesap Makinesi';
                        content = `
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; padding: 10px; background-color: #E0E0E0; border: 1px inset #c0c0c0; border-radius: 3px;">
                                <input type="text" id="calc-display" value="0" readonly style="grid-column: span 4; height: 40px; font-size: 1.8em; text-align: right; background-color: #FFF; border: 1px inset #808080; padding: 5px; box-sizing: border-box;">
                                <button class="calc-btn" data-val="C" style="background-color: #f0f0f0; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">C</button>
                                <button class="calc-btn" data-val="/" style="background-color: #f0f0f0; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">/</button>
                                <button class="calc-btn" data-val="*" style="background-color: #f0f0f0; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">*</button>
                                <button class="calc-btn" data-val="<--" style="background-color: #f0f0f0; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">&#x2190;</button>
                                <button class="calc-btn" data-val="7" style="background-color: #fff; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">7</button>
                                <button class="calc-btn" data-val="8" style="background-color: #fff; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">8</button>
                                <button class="calc-btn" data-val="9" style="background-color: #fff; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">9</button>
                                <button class="calc-btn" data-val="-" style="background-color: #f0f0f0; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">-</button>
                                <button class="calc-btn" data-val="4" style="background-color: #fff; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">4</button>
                                <button class="calc-btn" data-val="5" style="background-color: #fff; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">5</button>
                                <button class="calc-btn" data-val="6" style="background-color: #fff; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">6</button>
                                <button class="calc-btn" data-val="+" style="background-color: #f0f0f0; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">+</button>
                                <button class="calc-btn" data-val="1" style="background-color: #fff; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">1</button>
                                <button class="calc-btn" data-val="2" style="background-color: #fff; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">2</button>
                                <button class="calc-btn" data-val="3" style="background-color: #fff; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">3</button>
                                <button class="calc-btn" data-val="=" style="grid-row: span 2; background-color: #f0f0f0; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">=</button>
                                <button class="calc-btn" data-val="0" style="grid-column: span 2; background-color: #fff; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">0</button>
                                <button class="calc-btn" data-val="." style="background-color: #fff; border: 1px outset #c0c0c0; border-radius: 3px; padding: 10px; font-size: 1.1em;">.</button>
                            </div>
                        `;
                        width = 250;
                        height = 350;
                        break;
                    case 'recycle-bin':
                        title = 'Geri Dönüşüm Kutusu';
                        content = `<p>Geri dönüşüm kutunuz boş.</p><p>Dosyaları buraya sürükleyip bırakarak silebilirsiniz.</p>`;
                        width = 400;
                        height = 250;
                        break;
                    case 'my-documents':
                    case 'my-pictures':
                    case 'my-music':
                    case 'control-panel':
                    case 'network-connections':
                    case 'help-and-support':
                    case 'run':
                        title = e.target.textContent.trim(); // Menü öğesinin metnini başlık yap
                        content = `<p><b>${title}</b> simülasyonu henüz hazır değil.</p><p>Yakında eklenecek!</p>`;
                        width = 350;
                        height = 200;
                        break;
                    default:
                        title = 'Bilinmeyen Uygulama';
                        content = `<p>Bu uygulama şu anda kullanılamıyor.</p>`;
                        break;
                }
                createWindow(appId, title, content, width, height);

                // Hesap makinesi butonlarına tıklama işlevselliği
                if (appId === 'calculator') {
                    setTimeout(() => { // Pencere oluşturulduktan sonra butonları bul
                        const calcButtons = document.querySelectorAll('#window-calculator .calc-btn');
                        const calcDisplay = document.getElementById('calc-display');
                        let currentInput = '';
                        let operator = '';
                        let firstOperand = null;
                        let expectsNewInput = false; // Yeni bir işlem başladığında ekranın sıfırlanması için

                        calcButtons.forEach(button => {
                            button.addEventListener('click', () => {
                                const val = button.dataset.val;

                                if (val === 'C') {
                                    currentInput = '';
                                    operator = '';
                                    firstOperand = null;
                                    calcDisplay.value = '0';
                                    expectsNewInput = false;
                                } else if (val === '<--') {
                                    currentInput = currentInput.slice(0, -1);
                                    calcDisplay.value = currentInput || '0';
                                } else if (['+', '-', '*', '/'].includes(val)) {
                                    if (currentInput) {
                                        if (firstOperand !== null && operator && !expectsNewInput) {
                                            // Zincirleme işlemler için mevcut sonucu kullan
                                            const secondOperand = parseFloat(currentInput);
                                            let result;
                                            switch (operator) {
                                                case '+': result = firstOperand + secondOperand; break;
                                                case '-': result = firstOperand - secondOperand; break;
                                                case '*': result = firstOperand * secondOperand; break;
                                                case '/': result = firstOperand / secondOperand; break;
                                            }
                                            firstOperand = result;
                                            calcDisplay.value = result;
                                        } else {
                                            firstOperand = parseFloat(currentInput);
                                        }
                                        operator = val;
                                        currentInput = '';
                                        expectsNewInput = true;
                                    }
                                } else if (val === '=') {
                                    if (firstOperand !== null && operator && currentInput) {
                                        const secondOperand = parseFloat(currentInput);
                                        let result;
                                        switch (operator) {
                                            case '+': result = firstOperand + secondOperand; break;
                                            case '-': result = firstOperand - secondOperand; break;
                                            case '*': result = firstOperand * secondOperand; break;
                                            case '/': result = firstOperand / secondOperand; break;
                                        }
                                        calcDisplay.value = result;
                                        currentInput = result.toString();
                                        firstOperand = null;
                                        operator = '';
                                        expectsNewInput = true;
                                    }
                                } else { // Rakamlar ve nokta
                                    if (expectsNewInput) {
                                        currentInput = val;
                                        expectsNewInput = false;
                                    } else {
                                        if (val === '.' && currentInput.includes('.')) return;
                                        currentInput += val;
                                    }
                                    calcDisplay.value = currentInput;
                                }
                            });
                        });
                    }, 100); // Küçük bir gecikme ekleyelim ki pencere tamamlansın
                }
            }

            // --- İkon ve Menü Öğelerine Tıklama Olayları ---
            document.querySelectorAll('.desktop-icon').forEach(icon => {
                icon.addEventListener('dblclick', (e) => { // Çift tıklama
                    const appId = icon.dataset.app;
                    openApp(appId);
                });
            });

            document.querySelectorAll('.start-menu-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    const appId = item.dataset.app;
                    if (appId) {
                        openApp(appId);
                    } else if (item.classList.contains('logout')) {
                        if (confirm('Bilgisayarı kapatmak istediğinizden emin misiniz?')) {
                             // Gerçek bir kapatma değil, sadece simülasyon.
                             alert('Windows kapatılıyor... Güle güle!');
                             // İsteğe bağlı olarak sayfayı yenileyebiliriz:
                             // window.location.reload();
                        }
                    }
                    startMenu.classList.remove('show'); // Menüyü kapat
                });
            });
        });
    </script>
</body>
</html>
