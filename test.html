<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows Simülasyonu</title>
    <style>
        /* CSS KODLARI BURAYA GELECEK */
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            overflow: hidden; /* Kaydırma çubuklarını gizler */
            background-color: #008080; /* Windows 95 benzeri bir arka plan */
            cursor: default; /* Varsayılan imleç */
        }

        #desktop {
            width: 100vw; /* Görünüm genişliğinin %100'ü */
            height: calc(100vh - 40px); /* Görev çubuğu yüksekliği kadar boşluk bırakır */
            background-color: #008080; /* Masaüstü rengi */
            position: relative; /* İçindeki elemanların konumlandırılması için */
            display: flex;
            flex-wrap: wrap; /* İkonları yan yana ve alt alta dizmek için */
            align-content: flex-start; /* İkonları yukarıya hizalar */
            padding: 10px;
        }

        #taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background-color: #C0C0C0; /* Gri görev çubuğu rengi */
            border-top: 2px solid #FFFFFF;
            border-right: 2px solid #808080;
            border-bottom: 2px solid #808080;
            border-left: 2px solid #FFFFFF;
            display: flex;
            align-items: center;
            padding: 0 5px;
            box-sizing: border-box; /* Padding'in genişliğe dahil edilmesini sağlar */
            z-index: 1000; /* En üstte görünmesini sağlar */
        }

        #start-button {
            background-color: #C0C0C0;
            border-top: 2px solid #FFFFFF;
            border-right: 2px solid #808080;
            border-bottom: 2px solid #808080;
            border-left: 2px solid #FFFFFF;
            padding: 5px 10px;
            font-weight: bold;
            cursor: pointer;
            margin-right: 10px;
            box-shadow: 1px 1px 0px #000; /* Hafif gölge efekti */
            user-select: none; /* Metin seçimi engeller */
        }

        #start-button:active {
            border-top: 2px solid #808080;
            border-right: 2px solid #FFFFFF;
            border-bottom: 2px solid #FFFFFF;
            border-left: 2px solid #808080;
            box-shadow: none; /* Basıldığında gölge kalkar */
        }

        #taskbar-apps {
            flex-grow: 1; /* Geri kalan alanı doldurur */
            display: flex;
            align-items: center;
        }

        .taskbar-app-icon {
            background-color: #C0C0C0;
            border-top: 2px solid #808080;
            border-right: 2px solid #FFFFFF;
            border-bottom: 2px solid #FFFFFF;
            border-left: 2px solid #808080;
            padding: 2px 8px;
            margin-left: 2px;
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            height: 26px; /* Görev çubuğu içindeki ikon yüksekliği */
        }

        .taskbar-app-icon.active {
             border-top: 2px solid #FFFFFF;
            border-right: 2px solid #808080;
            border-bottom: 2px solid #808080;
            border-left: 2px solid #FFFFFF;
            box-shadow: 1px 1px 0px #000;
        }

        #system-tray {
            display: flex;
            align-items: center;
            background-color: #C0C0C0;
            border-top: 2px solid #808080;
            border-right: 2px solid #FFFFFF;
            border-bottom: 2px solid #FFFFFF;
            border-left: 2px solid #808080;
            padding: 0 10px;
            height: 100%;
            box-sizing: border-box;
            margin-left: auto; /* Sağa hizalar */
        }

        #time {
            font-size: 0.9em;
            margin-left: 5px;
        }

        .desktop-icon {
            width: 70px;
            height: 70px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 10px;
            text-align: center;
            color: white;
            text-shadow: 1px 1px 2px black;
            font-size: 0.8em;
            cursor: pointer;
            user-select: none; /* Metin seçimi engeller */
        }

        .desktop-icon img {
            width: 32px; /* İkon görseli boyutu */
            height: 32px;
            margin-bottom: 5px;
        }

        .window {
            position: absolute;
            background-color: #C0C0C0;
            border-top: 2px solid #FFFFFF;
            border-right: 2px solid #808080;
            border-bottom: 2px solid #808080;
            border-left: 2px solid #FFFFFF;
            min-width: 200px;
            min-height: 150px;
            box-shadow: 4px 4px 8px rgba(0,0,0,0.4);
            resize: both; /* Boyutlandırılabilir yapar */
            overflow: auto; /* İçerik taşarsa kaydırma çubukları çıkar */
            z-index: 999; /* Pencereleri diğerlerinin üstünde tutar */
            display: flex;
            flex-direction: column;
            max-width: 90vw;
            max-height: calc(100vh - 60px);
        }

        .window.minimized {
            display: none; /* Küçültülmüş pencereleri gizle */
        }

        .window-title-bar {
            background-color: #000080; /* Mavi başlık çubuğu */
            color: white;
            padding: 3px 5px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: grab; /* Sürükleme imleci */
            user-select: none;
            border-bottom: 1px solid #C0C0C0; /* Hafif ayırıcı */
        }

        .window-title-bar span {
            flex-grow: 1; /* Başlık metnini yayar */
        }

        .window-buttons {
            display: flex;
        }

        .window-button {
            background-color: #C0C0C0;
            border-top: 2px solid #FFFFFF;
            border-right: 2px solid #808080;
            border-bottom: 2px solid #808080;
            border-left: 2px solid #FFFFFF;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: 2px;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: bold;
            line-height: 1; /* Metnin dikey hizalaması için */
            user-select: none;
        }

        .window-button:active {
            border-top: 2px solid #808080;
            border-right: 2px solid #FFFFFF;
            border-bottom: 2px solid #FFFFFF;
            border-left: 2px solid #808080;
        }

        .window-content {
            flex-grow: 1; /* İçeriğin kalan alanı doldurmasını sağlar */
            padding: 10px;
            background-color: #FFFFFF; /* İçerik alanı beyaz */
            overflow: auto;
        }

        /* Başlat Menüsü */
        #start-menu {
            position: absolute;
            bottom: 40px; /* Görev çubuğunun hemen üstünde */
            left: 0;
            width: 180px;
            background-color: #C0C0C0;
            border-top: 2px solid #FFFFFF;
            border-right: 2px solid #808080;
            border-bottom: 2px solid #808080;
            border-left: 2px solid #FFFFFF;
            box-shadow: 4px 4px 8px rgba(0,0,0,0.4);
            display: none; /* Başlangıçta gizli */
            flex-direction: column;
            padding: 5px;
            z-index: 1001; /* En üstte görünmesi için */
        }

        #start-menu.show {
            display: flex;
        }

        .start-menu-item {
            padding: 5px 10px;
            border: 1px solid transparent; /* Varsayılan olarak şeffaf kenarlık */
            cursor: pointer;
            user-select: none;
            white-space: nowrap; /* Metni tek satırda tut */
        }

        .start-menu-item:hover {
            background-color: #000080; /* Üzerine gelindiğinde mavi arka plan */
            color: white;
            border-color: #000080; /* Kenarlık da mavi olur */
        }

        .start-menu-item.logout {
            border-top: 1px solid #808080; /* Çıkış öğesi için üst çizgi */
            margin-top: 5px;
            padding-top: 8px;
        }

    </style>
</head>
<body>

    <div id="desktop">
        <div class="desktop-icon" data-app="my-computer">
            <img src="https://img.icons8.com/ios-filled/50/FFFFFF/computer.png" alt="Bilgisayarım">
            <span>Bilgisayarım</span>
        </div>
        <div class="desktop-icon" data-app="notepad">
            <img src="https://img.icons8.com/ios-filled/50/FFFFFF/notepad.png" alt="Not Defteri">
            <span>Not Defteri</span>
        </div>
        <div class="desktop-icon" data-app="calculator">
            <img src="https://img.icons8.com/ios-filled/50/FFFFFF/calculator.png" alt="Hesap Makinesi">
            <span>Hesap Makinesi</span>
        </div>
        <div class="desktop-icon" data-app="recycle-bin">
            <img src="https://img.icons8.com/ios-filled/50/FFFFFF/trash.png" alt="Geri Dönüşüm Kutusu">
            <span>Geri Dönüşüm Kutusu</span>
        </div>
    </div>

    <div id="taskbar">
        <div id="start-button">Başlat</div>
        <div id="taskbar-apps">
            </div>
        <div id="system-tray">
            <img src="https://img.icons8.com/ios-filled/20/FFFFFF/volume.png" alt="Ses" style="filter: invert(1); margin-right: 5px;">
            <span id="time"></span>
            </div>
    </div>

    <div id="start-menu">
        <div class="start-menu-item" data-app="my-computer">Bilgisayarım</div>
        <div class="start-menu-item" data-app="notepad">Not Defteri</div>
        <div class="start-menu-item" data-app="calculator">Hesap Makinesi</div>
        <div class="start-menu-item" data-app="recycle-bin">Geri Dönüşüm Kutusu</div>
        <div class="start-menu-item logout">Kapat</div>
    </div>

    <script>
        /* JAVASCRIPT KODLARI BURAYA GELECEK */
        document.addEventListener('DOMContentLoaded', () => {
            const desktop = document.getElementById('desktop');
            const timeElement = document.getElementById('time');
            const startButton = document.getElementById('start-button');
            const startMenu = document.getElementById('start-menu');
            const taskbarApps = document.getElementById('taskbar-apps');

            let zIndexCounter = 100; // Pencerelerin z-index'ini yönetmek için
            let openWindows = {}; // Açık pencereleri takip etmek için

            // --- Saat Güncelleme ---
            function updateTime() {
                const now = new Date();
                let hours = now.getHours();
                let minutes = now.getMinutes();
                let ampm = hours >= 12 ? 'ÖS' : 'ÖÖ'; // Öğleden önce/sonra
                hours = hours % 12;
                hours = hours ? hours : 12; // Saat '0' ise '12' yap
                minutes = minutes < 10 ? '0' + minutes : minutes; // Tek haneli dakikayı '0' ile başlat

                timeElement.textContent = `${hours}:${minutes} ${ampm}`;
            }
            setInterval(updateTime, 1000);
            updateTime(); // Sayfa yüklendiğinde hemen göster

            // --- Başlat Menüsü İşlevselliği ---
            startButton.addEventListener('click', (event) => {
                event.stopPropagation(); // Olayın dışarı yayılmasını engeller
                startMenu.classList.toggle('show');
            });

            // Başlat menüsü dışına tıklanırsa kapat
            document.addEventListener('click', (event) => {
                if (!startMenu.contains(event.target) && event.target !== startButton) {
                    startMenu.classList.remove('show');
                }
            });

            // --- Pencere Yaratma ve Yönetimi ---
            function createWindow(appId, title, contentHTML, width = 400, height = 300) {
                if (openWindows[appId] && !openWindows[appId].classList.contains('minimized')) {
                    // Zaten açık ve küçültülmemişse, öne getir
                    bringWindowToFront(openWindows[appId]);
                    return;
                } else if (openWindows[appId] && openWindows[appId].classList.contains('minimized')) {
                    // Küçültülmüşse, geri yükle
                    openWindows[appId].classList.remove('minimized');
                    openWindows[appId].style.display = 'flex'; // Tekrar görünür yap
                    bringWindowToFront(openWindows[appId]);
                    const taskbarIcon = document.querySelector(`.taskbar-app-icon[data-app="${appId}"]`);
                    if(taskbarIcon) taskbarIcon.classList.add('active'); // Görev çubuğu ikonunu aktif yap
                    return;
                }

                zIndexCounter++;

                const windowDiv = document.createElement('div');
                windowDiv.className = 'window';
                windowDiv.id = `window-${appId}`;
                windowDiv.style.zIndex = zIndexCounter;
                windowDiv.style.width = `${width}px`;
                windowDiv.style.height = `${height}px`;
                // Rastgele başlangıç konumu
                windowDiv.style.left = `${Math.random() * (window.innerWidth - width - 100) + 50}px`;
                windowDiv.style.top = `${Math.random() * (window.innerHeight - height - 100) + 50}px`;
                
                windowDiv.addEventListener('mousedown', () => bringWindowToFront(windowDiv));


                windowDiv.innerHTML = `
                    <div class="window-title-bar">
                        <span>${title}</span>
                        <div class="window-buttons">
                            <div class="window-button minimize-button" data-window-id="${appId}">-</div>
                            <div class="window-button maximize-button" data-window-id="${appId}">&#9633;</div>
                            <div class="window-button close-button" data-window-id="${appId}">X</div>
                        </div>
                    </div>
                    <div class="window-content">${contentHTML}</div>
                `;

                desktop.appendChild(windowDiv);
                openWindows[appId] = windowDiv; // Pencereyi açık pencereler listesine ekle

                addWindowDrag(windowDiv);
                addWindowButtons(windowDiv, appId, title);
                addAppToTaskbar(appId, title);
            }

            function bringWindowToFront(windowElement) {
                zIndexCounter++;
                windowElement.style.zIndex = zIndexCounter;
                // Tüm görev çubuğu ikonlarının aktifliğini kaldır
                document.querySelectorAll('.taskbar-app-icon').forEach(icon => icon.classList.remove('active'));
                // Bu pencerenin görev çubuğu ikonunu aktif yap
                const taskbarIcon = document.querySelector(`.taskbar-app-icon[data-app="${windowElement.id.replace('window-', '')}"]`);
                if(taskbarIcon) taskbarIcon.classList.add('active');
            }


            // --- Pencere Sürükleme ---
            function addWindowDrag(windowElement) {
                const titleBar = windowElement.querySelector('.window-title-bar');
                let isDragging = false;
                let offsetX, offsetY;

                titleBar.addEventListener('mousedown', (e) => {
                    if (e.target.classList.contains('window-button')) return; // Butonlara tıklayınca sürüklemeyi engelle
                    isDragging = true;
                    windowElement.style.cursor = 'grabbing';
                    offsetX = e.clientX - windowElement.getBoundingClientRect().left;
                    offsetY = e.clientY - windowElement.getBoundingClientRect().top;
                    bringWindowToFront(windowElement); // Sürüklenirken öne getir
                });

                desktop.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;
                    windowElement.style.left = `${e.clientX - offsetX}px`;
                    windowElement.style.top = `${e.clientY - offsetY}px`;
                });

                desktop.addEventListener('mouseup', () => {
                    isDragging = false;
                    windowElement.style.cursor = 'default';
                });
            }

            // --- Pencere Butonları (Küçült, Büyüt, Kapat) ---
            function addWindowButtons(windowElement, appId, title) {
                const minimizeButton = windowElement.querySelector('.minimize-button');
                const maximizeButton = windowElement.querySelector('.maximize-button');
                const closeButton = windowElement.querySelector('.close-button');

                minimizeButton.addEventListener('click', () => {
                    windowElement.classList.add('minimized');
                    const taskbarIcon = document.querySelector(`.taskbar-app-icon[data-app="${appId}"]`);
                    if(taskbarIcon) taskbarIcon.classList.remove('active'); // Aktifliğini kaldır
                });

                maximizeButton.addEventListener('click', () => {
                    // Basit bir toggle mekanizması
                    if (windowElement.style.width === '100vw' && windowElement.style.height === 'calc(100vh - 40px)') {
                        // Küçült
                        windowElement.style.width = '400px';
                        windowElement.style.height = '300px';
                        windowElement.style.left = '50px';
                        windowElement.style.top = '50px';
                        windowElement.style.resize = 'both'; // Boyutlandırmayı tekrar etkinleştir
                    } else {
                        // Tam ekran yap
                        windowElement.style.width = '100vw';
                        windowElement.style.height = 'calc(100vh - 40px)';
                        windowElement.style.left = '0';
                        windowElement.style.top = '0';
                        windowElement.style.resize = 'none'; // Tam ekrandayken boyutlandırmayı devre dışı bırak
                    }
                });

                closeButton.addEventListener('click', () => {
                    windowElement.remove();
                    delete openWindows[appId]; // Açık pencereler listesinden kaldır
                    removeAppFromTaskbar(appId);
                });
            }

            // --- Görev Çubuğuna Uygulama Ekleme/Kaldırma ---
            function addAppToTaskbar(appId, title) {
                const existingIcon = document.querySelector(`.taskbar-app-icon[data-app="${appId}"]`);
                if (existingIcon) {
                    existingIcon.classList.add('active'); // Zaten varsa sadece aktif yap
                    return;
                }

                const taskbarIcon = document.createElement('div');
                taskbarIcon.className = 'taskbar-app-icon active';
                taskbarIcon.setAttribute('data-app', appId);
                taskbarIcon.textContent = title;
                taskbarApps.appendChild(taskbarIcon);

                taskbarIcon.addEventListener('click', () => {
                    const windowElement = openWindows[appId];
                    if (windowElement) {
                        if (windowElement.classList.contains('minimized')) {
                            windowElement.classList.remove('minimized');
                            windowElement.style.display = 'flex'; // Görünür yap
                            bringWindowToFront(windowElement);
                            taskbarIcon.classList.add('active');
                        } else {
                            // Zaten açıksa ve aktifse küçült, değilse öne getir
                            if (windowElement.style.zIndex === zIndexCounter.toString()) { // Eğer en üstte ise küçült
                                windowElement.classList.add('minimized');
                                taskbarIcon.classList.remove('active');
                            } else {
                                bringWindowToFront(windowElement);
                            }
                        }
                    }
                });
            }

            function removeAppFromTaskbar(appId) {
                const taskbarIcon = document.querySelector(`.taskbar-app-icon[data-app="${appId}"]`);
                if (taskbarIcon) {
                    taskbarIcon.remove();
                }
            }


            // --- Uygulama Açma İşlevselliği ---
            function openApp(appId) {
                let title = '';
                let content = '';
                let width = 400;
                let height = 300;

                switch (appId) {
                    case 'my-computer':
                        title = 'Bilgisayarım';
                        content = `
                            <p>Bu bilgisayardaki sürücüler ve dosyalar hakkında bilgi...</p>
                            <ul>
                                <li>Yerel Disk (C:)</li>
                                <li>CD Sürücüsü (D:)</li>
                                <li>Ağ Bağlantıları</li>
                            </ul>
                        `;
                        width = 500;
                        height = 350;
                        break;
                    case 'notepad':
                        title = 'Not Defteri';
                        content = `<textarea style="width: 100%; height: calc(100% - 20px); resize: none; border: none; outline: none; padding: 5px; box-sizing: border-box;"></textarea>`;
                        width = 450;
                        height = 350;
                        break;
                    case 'calculator':
                        title = 'Hesap Makinesi';
                        content = `
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; padding: 10px; background-color: #E0E0E0; border: 1px solid #808080;">
                                <input type="text" id="calc-display" value="0" readonly style="grid-column: span 4; height: 40px; font-size: 1.5em; text-align: right; background-color: #FFF; border: 1px inset #808080;">
                                <button class="calc-btn" data-val="C">C</button>
                                <button class="calc-btn" data-val="/">/</button>
                                <button class="calc-btn" data-val="*">*</button>
                                <button class="calc-btn" data-val="<--">&#x2190;</button>
                                <button class="calc-btn" data-val="7">7</button>
                                <button class="calc-btn" data-val="8">8</button>
                                <button class="calc-btn" data-val="9">9</button>
                                <button class="calc-btn" data-val="-">-</button>
                                <button class="calc-btn" data-val="4">4</button>
                                <button class="calc-btn" data-val="5">5</button>
                                <button class="calc-btn" data-val="6">6</button>
                                <button class="calc-btn" data-val="+">+</button>
                                <button class="calc-btn" data-val="1">1</button>
                                <button class="calc-btn" data-val="2">2</button>
                                <button class="calc-btn" data-val="3">3</button>
                                <button class="calc-btn" data-val="=" style="grid-row: span 2;">=</button>
                                <button class="calc-btn" data-val="0" style="grid-column: span 2;">0</button>
                                <button class="calc-btn" data-val=".">.</button>
                            </div>
                        `;
                        width = 250;
                        height = 350;
                        break;
                    case 'recycle-bin':
                        title = 'Geri Dönüşüm Kutusu';
                        content = `<p>Geri dönüşüm kutunuz boş.</p><p>Dosyaları buraya sürükleyip bırakarak silebilirsiniz.</p>`;
                        width = 400;
                        height = 250;
                        break;
                    default:
                        title = 'Bilinmeyen Uygulama';
                        content = `<p>Bu uygulama şu anda kullanılamıyor.</p>`;
                        break;
                }
                createWindow(appId, title, content, width, height);

                // Hesap makinesi butonlarına tıklama işlevselliği
                if (appId === 'calculator') {
                    setTimeout(() => { // Pencere oluşturulduktan sonra butonları bul
                        const calcButtons = document.querySelectorAll('#window-calculator .calc-btn');
                        const calcDisplay = document.getElementById('calc-display');
                        let currentInput = '';
                        let operator = '';
                        let firstOperand = null;

                        calcButtons.forEach(button => {
                            button.addEventListener('click', () => {
                                const val = button.dataset.val;

                                if (val === 'C') {
                                    currentInput = '';
                                    operator = '';
                                    firstOperand = null;
                                    calcDisplay.value = '0';
                                } else if (val === '<--') {
                                    currentInput = currentInput.slice(0, -1);
                                    calcDisplay.value = currentInput || '0';
                                } else if (['+', '-', '*', '/'].includes(val)) {
                                    if (currentInput) {
                                        firstOperand = parseFloat(currentInput);
                                        operator = val;
                                        currentInput = '';
                                    }
                                } else if (val === '=') {
                                    if (firstOperand !== null && operator && currentInput) {
                                        const secondOperand = parseFloat(currentInput);
                                        let result;
                                        switch (operator) {
                                            case '+': result = firstOperand + secondOperand; break;
                                            case '-': result = firstOperand - secondOperand; break;
                                            case '*': result = firstOperand * secondOperand; break;
                                            case '/': result = firstOperand / secondOperand; break;
                                        }
                                        calcDisplay.value = result;
                                        currentInput = result.toString();
                                        firstOperand = null;
                                        operator = '';
                                    }
                                } else { // Rakamlar ve nokta
                                    if (val === '.' && currentInput.includes('.')) return;
                                    currentInput += val;
                                    calcDisplay.value = currentInput;
                                }
                            });
                        });
                    }, 100); // Küçük bir gecikme ekleyelim ki pencere tamamlansın
                }
            }

            // --- İkon ve Menü Öğelerine Tıklama Olayları ---
            document.querySelectorAll('.desktop-icon').forEach(icon => {
                icon.addEventListener('dblclick', (e) => { // Çift tıklama
                    const appId = icon.dataset.app;
                    openApp(appId);
                });
            });

            document.querySelectorAll('.start-menu-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    const appId = item.dataset.app;
                    if (appId) {
                        openApp(appId);
                    } else if (item.classList.contains('logout')) {
                        alert('Windows kapatılıyor... (Bu sadece bir simülasyon!)');
                        // Sayfayı yenileyebilir veya farklı bir ekran gösterebilirsin
                        // window.location.reload();
                    }
                    startMenu.classList.remove('show'); // Menüyü kapat
                });
            });

        });
    </script>
</body>
</html>
